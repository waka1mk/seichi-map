<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>四国聖地巡礼マップ</title>

  <!-- Leaflet -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

  <!-- Style -->
  <link rel="stylesheet" href="style.css" />

  <!-- Manifest & theme -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#87c38f" />
</head>
<body>

  <!-- ヘッダー -->
  <header id="mainHeader">
    <h1>四国聖地巡礼マップ</h1>
    <div id="userInfo" style="position:absolute; right:16px; top:10px; color:#fff; font-size:14px;"></div>
  </header>

  <!-- 検索バー -->
  <div id="searchBar" role="search">
    <svg width="18" height="18" viewBox="0 0 24 24" aria-hidden="true">
      <path fill="#999" d="M21 21l-4.35-4.35" stroke-width="2" stroke="currentColor" stroke-linecap="round"/>
      <circle cx="11" cy="11" r="6" fill="none" stroke="#999" stroke-width="2"/>
    </svg>
    <input id="searchInput" type="search" placeholder="作品名や場所で検索（例：琴平）" aria-label="検索" />
    <button id="searchBtn" aria-label="検索ボタン" style="border:none;background:transparent;font-size:14px;">検索</button>
  </div>

  <!-- 地図を包むカード -->
  <div id="mapWrapper">
    <div id="map" aria-label="地図"></div>
  </div>

  <!-- タイムライン（投稿一覧） -->
  <aside id="timelinePanel" class="side-panel" aria-hidden="true">
    <h2>みんなの投稿</h2>
    <div id="postsContainer"></div>
  </aside>

  <!-- 投稿フォーム（モーダル） -->
  <div id="postModal" class="modal" aria-hidden="true">
    <div class="modal-content">
      <h2>新しい投稿</h2>
      <input type="text" id="postTitle" placeholder="タイトル" />
      <textarea id="postContent" placeholder="思い出や感想を入力" rows="4"></textarea>
      <label style="font-size:13px;color:#666;margin-top:8px;display:block;">
        ※投稿は現在の地図中心の位置に登録されます。地図を移動して位置を調整してください。
      </label>
      <button id="submitPost">投稿</button>
      <button id="closePostModal" style="margin-top:8px;background:#eee;color:#333;">閉じる</button>
    </div>
  </div>

  <!-- ログイン画面（初回表示） -->
  <div id="loginScreen" class="modal active" aria-hidden="false">
    <div class="modal-content">
      <h2>ようこそ！</h2>
      <p>ユーザー名を入力してはじめよう</p>
      <input type="text" id="usernameInput" placeholder="ユーザー名" />
      <button id="loginBtn">はじめる</button>
    </div>
  </div>

  <!-- フローティングボタン群 -->
  <div id="fabMenu" class="fab-menu" aria-hidden="false">
    <button id="mapBtn" class="fab small" title="地図を中心に">🗺️<span style="font-size:11px;margin-top:4px;display:block;">地図</span></button>
    <button id="timelineBtn" class="fab small" title="みんなの投稿">📜<span style="font-size:11px;margin-top:4px;display:block;">投稿</span></button>
    <button id="postBtn" class="fab small" title="新しい投稿">➕<span style="font-size:11px;margin-top:4px;display:block;">投稿</span></button>
  </div>

  <!-- 大きな＋ボタン（別） -->
  <button id="fab" class="fab main" title="新規">＋</button>

  <!-- JS -->
  <script src="script.js"></script>
  <script src="comments.js"></script>
</body>
</html>
